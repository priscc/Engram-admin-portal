{"remainingRequest":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/engram/Documents/Web_apps/ap-study-bites-admin/src/components/ModifyContent/ContentDetails/Events/Forms/EventGeneral.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/src/components/ModifyContent/ContentDetails/Events/Forms/EventGeneral.vue","mtime":1642803768025},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/cache-loader/dist/cjs.js","mtime":1640582283784},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/babel-loader/lib/index.js","mtime":1640582283745},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/cache-loader/dist/cjs.js","mtime":1640582283784},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/index.js","mtime":1640582283219}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgbWFwRmllbGRzIH0gZnJvbSAidnVleC1tYXAtZmllbGRzIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKaW1wb3J0IG5hdmJhciBmcm9tICIuL0V2ZW50Q2FyZEhlYWRlci52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgbmF2YmFyIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIGltYWdlOiBudWxsLAogICAgZXZlbnRUaGVtZTogWwogICAgICAiU29jaWV0eSIsCiAgICAgICJQb2xpdGljcyIsCiAgICAgICJFbnZpcm9ubWVudCIsCiAgICAgICJDdWx0dXJlIiwKICAgICAgIkVjb25vbWljcyIsCiAgICAgICJUZWNobm9sb2d5IiwKICAgICAgIkluZGVwZW5kZW50IiwKICAgIF0sCiAgICBkaXNhYmxlZDogMSwKICAgIHVybDogbnVsbCwKICAgIGltYWdlRGF0YTogbnVsbCwKICAgIGVyYVN0YXJ0OiAiQUQiLAogICAgZXJhRW5kOiAiQUQiLAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICBjaGVja2ZpZWxkKCkgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50RXZlbnQudGl0bGU7CiAgICB9LAogICAgLi4ubWFwRmllbGRzKCJldmVudHMiLCBbCiAgICAgICJjdXJyZW50RXZlbnQudGl0bGUiLAogICAgICAiY3VycmVudEV2ZW50LnRodW1iVVJMIiwKICAgICAgImN1cnJlbnRFdmVudC50aHVtYkZpbGUiLAogICAgXSksCiAgICAuLi5tYXBGaWVsZHMoImV2ZW50cyIsIHsKICAgICAgc2VsZWN0ZWRUaGVtZXM6ICJjdXJyZW50RXZlbnQudGhlbWUiLAogICAgICBzdGFydERhdGU6ICJjdXJyZW50RXZlbnQuc3RhcnREYXRlLmRhdGUiLAogICAgICBzdGFydEVyYTogImN1cnJlbnRFdmVudC5zdGFydERhdGUuZXJhIiwKICAgICAgZW5kRGF0ZTogImN1cnJlbnRFdmVudC5lbmREYXRlLmRhdGUiLAogICAgICBlbmRFcmE6ICJjdXJyZW50RXZlbnQuZW5kRGF0ZS5lcmEiLAogICAgfSksCiAgICAuLi5tYXBHZXR0ZXJzKCJldmVudHMiLCBbImN1cnJlbnRFdmVudCIsICJjdXJyZW50RXZlbnRJZCJdKSwKICAgIC8vKiBjaGVja3MgaWYgdGhlIHBlcnNvbiBuYW1lIGZpZWxkIGlzIGVtcHR5CiAgICByb3V0ZVZhbGlkYXRpb24oKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRFdmVudC50aXRsZSA9PSAiIikgewogICAgICAgIC8vKiBpZiBuYW1lIGZpZWxkIGlzIGVtcHR5LCByb3V0ZSBpcyBub3QgYWxsb3dlZAogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyogaWYgbm90IGVtcHR5LCByb3V0ZSBpcyBhbGxvd2VkCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKCJldmVudHMiLCBbImNsb3NlRm9ybSIsICJoYW5kbGVTYXZlIl0pLAogICAgbW91bnRQcmV2aWV3KCkgewogICAgICB0aGlzLnVybCA9IHRoaXMudGh1bWJVUkw7CiAgICB9LAogICAgc3dpdGNoVG9nZ2xlKGUsIGRhdGUpIHsKICAgICAgY29uc29sZS5sb2coInRvZ2dsaW5nIGVyYSIsIHRoaXMuZW5kRXJhKTsKICAgICAgaWYgKGRhdGUgPT09ICJzdGFydCIpIHsKICAgICAgICBpZiAodGhpcy5zdGFydEVyYSkgewogICAgICAgICAgdGhpcy5lcmFTdGFydCA9ICJBRCI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZXJhU3RhcnQgPSAiQkMiOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5lbmRFcmEpIHsKICAgICAgICAgIHRoaXMuZXJhRW5kID0gIkFEIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lcmFFbmQgPSAiQkMiOwogICAgICAgIH0KICAgICAgfQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAogICAgcHJldmlld0ltYWdlKGUpIHsKICAgICAgdGhpcy51cGxvYWRWYWx1ZSA9IDA7CiAgICAgIGxldCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIGxldCBmaWxlU2l6ZSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0OwogICAgICBpZiAoZmlsZVNpemUgPiAyKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGFsZXJ0KCJGaWxlIGlzIG92ZXIgMm1iIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwogICAgICAgIHRoaXMuaW1hZ2VEYXRhID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgICAgdGhpcy50aHVtYkZpbGUgPSBmaWxlLm5hbWU7CiAgICAgIH0KICAgIH0sCiAgICBvblVwbG9hZCgpIHsKICAgICAgY29uc3Qgc3RvcmFnZVJlZiA9IGZpcmViYXNlCiAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgIC5yZWYoYCR7dGhpcy5pbWFnZURhdGEubmFtZX1gKQogICAgICAgIC5wdXQodGhpcy5pbWFnZURhdGEpOwogICAgICBzdG9yYWdlUmVmLm9uKAogICAgICAgIGBzdGF0ZV9jaGFuZ2VkYCwKICAgICAgICAoc25hcHNob3QpID0+IHsKICAgICAgICAgIHRoaXMudXBsb2FkVmFsdWUgPQogICAgICAgICAgICAoc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMpICogMTAwOwogICAgICAgIH0sCiAgICAgICAgKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygiaW1hZ2UgdXBsb2FkIGVycm9yIiwgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgfSwKICAgICAgICAoKSA9PiB7CiAgICAgICAgICB0aGlzLnVwbG9hZFZhbHVlID0gMTAwOwogICAgICAgICAgc3RvcmFnZVJlZi5zbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKCh1cmwpID0+IHsKICAgICAgICAgICAgdGhpcy50aHVtYlVSTCA9IHVybDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICBhc3luYyBoYW5kbGVTYXZlRXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmltYWdlRGF0YSkgewogICAgICAgIGxldCBpbWdQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHRoaXMub25VcGxvYWQoKSk7CiAgICAgICAgYXdhaXQgaW1nUHJvbWlzZS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVNhdmUoKTsKICAgICAgICAgIH0sIDIwMDApOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVTYXZlKCk7CiAgICAgICAgfSwgMjAwMCk7CiAgICAgIH0KICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5tb3VudFByZXZpZXcoKTsKICB9LAp9Owo="},{"version":3,"sources":["EventGeneral.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EventGeneral.vue","sourceRoot":"src/components/ModifyContent/ContentDetails/Events/Forms","sourcesContent":["<template>\n  <div id=\"EventInfo\">\n    <v-form>\n      <v-card class=\"mx-auto mt-4 pb-6\" width=\"62vw\" height=\"auto\">\n        <navbar />\n        <v-container class=\"px-10\">\n          <v-row>\n            <v-col class=\"d-flex flex-row\">\n              <v-card\n                class=\"d-block\"\n                height=\"120px\"\n                width=\"180px\"\n                color=\"grey lighten-2\"\n              >\n                <v-img v-if=\"url\" :src=\"url\" height=\"100%\"></v-img>\n              </v-card>\n              <div class=\"d-flex align-end\">\n                <input\n                  class=\"pl-4\"\n                  ref=\"input1\"\n                  type=\"file\"\n                  @change=\"previewImage\"\n                />\n              </div>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col>\n              <v-text-field\n                v-model=\"title\"\n                label=\"Title\"\n                outlined\n                dense\n                required\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col>\n              <div>\n                <v-text-field\n                  v-model=\"startDate\"\n                  label=\"Start Date\"\n                  outlined\n                  dense\n                ></v-text-field>\n                <div class=\"d-flex align-center mt-n10\">\n                  <div class=\"d-flex\" style=\"width: 30px\">{{ eraStart }}</div>\n                  <v-switch\n                    v-model=\"startEra\"\n                    inset\n                    @click=\"switchToggle($event, 'start')\"\n                    color=\"#3891A6\"\n                  ></v-switch>\n                </div>\n              </div>\n            </v-col>\n            <v-spacer></v-spacer>\n            <v-col>\n              <div>\n                <v-text-field\n                  v-model=\"endDate\"\n                  label=\"End Date\"\n                  outlined\n                  dense\n                ></v-text-field>\n              </div>\n              <div class=\"d-flex align-center mt-n10\">\n                <div class=\"d-flex\" style=\"width: 30px\">{{ eraEnd }}</div>\n                <v-switch\n                  v-model=\"endEra\"\n                  inset\n                  @click=\"switchToggle($event, 'end')\"\n                  color=\"#3891A6\"\n                ></v-switch>\n              </div>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col lg=\"6\" md=\"6\" sm=\"12\" xs=\"12\" class=\"d-flex justify-start\">\n              <v-select\n                v-model=\"selectedThemes\"\n                :items=\"eventTheme\"\n                label=\"Choose Event Theme:\"\n                :menu-props=\"{ top: false, offsetY: true }\"\n                attach\n                chips\n                multiple\n                outlined\n                dense\n              ></v-select>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\"pt-10\">\n              <v-btn\n                class=\"white--text\"\n                width=\"140\"\n                color=\"#3891A6\"\n                elevation=\"2\"\n                block\n                :disabled=\"!checkfield\"\n                @click=\"handleSaveEvent\"\n                >Save Event\n                <v-icon small class=\"pl-2\">mdi-plus-circle-outline</v-icon>\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-container>\n      </v-card>\n    </v-form>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\nimport { mapFields } from \"vuex-map-fields\";\nimport firebase from \"firebase\";\nimport navbar from \"./EventCardHeader.vue\";\n\nexport default {\n  components: { navbar },\n  data: () => ({\n    image: null,\n    eventTheme: [\n      \"Society\",\n      \"Politics\",\n      \"Environment\",\n      \"Culture\",\n      \"Economics\",\n      \"Technology\",\n      \"Independent\",\n    ],\n    disabled: 1,\n    url: null,\n    imageData: null,\n    eraStart: \"AD\",\n    eraEnd: \"AD\",\n  }),\n  computed: {\n    checkfield() {\n      return this.currentEvent.title;\n    },\n    ...mapFields(\"events\", [\n      \"currentEvent.title\",\n      \"currentEvent.thumbURL\",\n      \"currentEvent.thumbFile\",\n    ]),\n    ...mapFields(\"events\", {\n      selectedThemes: \"currentEvent.theme\",\n      startDate: \"currentEvent.startDate.date\",\n      startEra: \"currentEvent.startDate.era\",\n      endDate: \"currentEvent.endDate.date\",\n      endEra: \"currentEvent.endDate.era\",\n    }),\n    ...mapGetters(\"events\", [\"currentEvent\", \"currentEventId\"]),\n    //* checks if the person name field is empty\n    routeValidation() {\n      if (this.currentEvent.title == \"\") {\n        //* if name field is empty, route is not allowed\n        return false;\n      } else {\n        //* if not empty, route is allowed\n        return true;\n      }\n    },\n  },\n  methods: {\n    ...mapActions(\"events\", [\"closeForm\", \"handleSave\"]),\n    mountPreview() {\n      this.url = this.thumbURL;\n    },\n    switchToggle(e, date) {\n      console.log(\"toggling era\", this.endEra);\n      if (date === \"start\") {\n        if (this.startEra) {\n          this.eraStart = \"AD\";\n        } else {\n          this.eraStart = \"BC\";\n        }\n      } else {\n        if (this.endEra) {\n          this.eraEnd = \"AD\";\n        } else {\n          this.eraEnd = \"BC\";\n        }\n      }\n      e.preventDefault();\n    },\n    previewImage(e) {\n      this.uploadValue = 0;\n      let file = e.target.files[0];\n      let fileSize = file.size / 1024 / 1024;\n      if (fileSize > 2) {\n        e.preventDefault();\n        alert(\"File is over 2mb\");\n      } else {\n        this.url = URL.createObjectURL(file);\n        this.imageData = e.target.files[0];\n        this.thumbFile = file.name;\n      }\n    },\n    onUpload() {\n      const storageRef = firebase\n        .storage()\n        .ref(`${this.imageData.name}`)\n        .put(this.imageData);\n      storageRef.on(\n        `state_changed`,\n        (snapshot) => {\n          this.uploadValue =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        },\n        (error) => {\n          console.log(\"image upload error\", error.message);\n        },\n        () => {\n          this.uploadValue = 100;\n          storageRef.snapshot.ref.getDownloadURL().then((url) => {\n            this.thumbURL = url;\n          });\n        }\n      );\n    },\n    async handleSaveEvent() {\n      if (this.imageData) {\n        let imgPromise = Promise.resolve(this.onUpload());\n        await imgPromise.then(async () => {\n          setTimeout(async () => {\n            await this.handleSave();\n          }, 2000);\n        });\n      } else {\n        setTimeout(async () => {\n          await this.handleSave();\n        }, 2000);\n      }\n    },\n  },\n  created() {\n    this.mountPreview();\n  },\n};\n</script>\n\n<style></style>\n"]}]}