{"remainingRequest":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/engram/Documents/Web_apps/ap-study-bites-admin/src/components/AddTopic/AddTopicForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/src/components/AddTopic/AddTopicForm.vue","mtime":1639249163410},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/cache-loader/dist/cjs.js","mtime":1639206897149},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/babel-loader/lib/index.js","mtime":1639206897121},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/cache-loader/dist/cjs.js","mtime":1639206897149},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/index.js","mtime":1639206895847}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgbWFwRmllbGRzIH0gZnJvbSAidnVleC1tYXAtZmllbGRzIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgaW1hZ2U6IG51bGwsCiAgICB0aW1lUGVyaW9kQ2hvaWNlczogWzEsIDIsIDMsIDRdLAogICAgZGlzYWJsZWQ6IDEsCiAgICB1cmw6IG51bGwsCiAgICBjYXB0aW9uOiAiIiwKICAgIGltZzE6ICIiLAogICAgaW1hZ2VEYXRhOiBudWxsLAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICBzZWxlY3RzUGVyaW9kKCkgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFBlcmlvZC5sZW5ndGggPiAwOwogICAgfSwKICAgIGljb24oKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdHNQZXJpb2QpIHJldHVybiAibWRpLW1pbnVzLWJveCI7CiAgICAgIHJldHVybiAibWRpLWNoZWNrYm94LWJsYW5rLW91dGxpbmUiOwogICAgfSwKICAgIGNoZWNrZmllbGQoKSB7CiAgICAgIHJldHVybiB0aGlzLnRpdGxlIHx8IHRoaXMuaW1hZ2UgfHwgdGhpcy5zZWxlY3RlZFBlcmlvZDsKICAgIH0sCiAgICAuLi5tYXBGaWVsZHMoInRvcGljcyIsIFsKICAgICAgImN1cnJlbnRUb3BpYy50aXRsZSIsCiAgICAgICJjdXJyZW50VG9waWMuaW50cm9NRCIsCiAgICAgICJjdXJyZW50VG9waWMuaW50cm9fdGh1bWJGaWxlIiwKICAgICAgImN1cnJlbnRUb3BpYy5pbnRyb190aHVtYlVSTCIsCiAgICAgICJjdXJyZW50VG9waWMudG9waWNfdGh1bWJGaWxlIiwKICAgICAgImN1cnJlbnRUb3BpYy50b3BpY190aHVtYlVSTCIsCiAgICAgIC8vICdjdXJyZW50VG9waWMuZGlzYWJsZWQnLAogICAgICAiY3VycmVudFRvcGljLnRpbWVQZXJpb2QiLAogICAgICAiY3VycmVudFRvcGljLnNlYXJjaEFycmF5IiwKICAgIF0pLAogIH0sCgogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZSgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuc2VsZWN0ZWRQZXJpb2QgPSBbdGhpcy50aW1lUGVyaW9kLnNsaWNlKCldOwogICAgICB9KTsKICAgIH0sCiAgICByZXNldGJ0bihlKSB7CiAgICAgIGlmICh0aGlzLmNoZWNrZmllbGQpIHsKICAgICAgICB0aGlzLmRpc2FibGVkID0gMDsKICAgICAgfQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAogICAgLy8gICAgICBjcmVhdGUgKCkgewoKICAgIC8vIGNvbnN0IHBvc3QgPSB7CiAgICAvLyAgIHBob3RvOiB0aGlzLmltZzEsCiAgICAvLyAgIGNhcHRpb246IHRoaXMuY2FwdGlvbgogICAgLy8gfQogICAgLy8gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ1Bob3RvR2FsbGVyeScpLnB1c2gocG9zdCkKICAgIC8vIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgIC8vIH0pCiAgICAvLyAuY2F0Y2goZXJyID0+IHsKICAgIC8vICAgY29uc29sZS5sb2coZXJyKQogICAgLy8gfSkKICAgIC8vICAgICB9LAogICAgLy8gICBjbGljazEoKSB7CiAgICAvLyAgIHRoaXMuJHJlZnMuaW5wdXQxLmNsaWNrKCkKICAgIC8vIH0sCiAgICBwcmV2aWV3SW1hZ2UoZSkgewogICAgICB0aGlzLnVwbG9hZFZhbHVlID0gMDsKICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZmlsZXNbMF0pOwogICAgICBsZXQgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICBsZXQgZmlsZVNpemUgPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNDsKICAgICAgaWYgKGZpbGVTaXplID4gMikgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBhbGVydCgiRmlsZSBpcyBvdmVyIDJtYiIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsKICAgICAgICB0aGlzLmltYWdlRGF0YSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgIHRoaXMudG9waWNfdGh1bWJGaWxlID0gZmlsZS5uYW1lOwogICAgICB9CiAgICB9LAogICAgb25VcGxvYWQoKSB7CiAgICAgIGNvbnN0IHN0b3JhZ2VSZWYgPSBmaXJlYmFzZQogICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAucmVmKGAke3RoaXMuaW1hZ2VEYXRhLm5hbWV9YCkKICAgICAgICAucHV0KHRoaXMuaW1hZ2VEYXRhKTsKICAgICAgc3RvcmFnZVJlZi5vbigKICAgICAgICBgc3RhdGVfY2hhbmdlZGAsCiAgICAgICAgKHNuYXBzaG90KSA9PiB7CiAgICAgICAgICB0aGlzLnVwbG9hZFZhbHVlID0KICAgICAgICAgICAgKHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzKSAqIDEwMDsKICAgICAgICB9LAogICAgICAgIChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyAoKSA9PiB7CiAgICAgICAgICB0aGlzLnVwbG9hZFZhbHVlID0gMTAwOwogICAgICAgICAgYXdhaXQgc3RvcmFnZVJlZi5zbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKCh1cmwpID0+IHsKICAgICAgICAgICAgLy8gdGhpcy5pbWcxID0gdXJsOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmltZzEpOwogICAgICAgICAgICB0aGlzLnRvcGljX3RodW1iVVJMID0gdXJsOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRvcGljX3RodW1iVVJMKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgLi4ubWFwQWN0aW9ucygidG9waWNzIiwgWyJzdWJtaXROZXdUb3BpYyJdKSwKICAgIGFzeW5jIGhhbmRsZVN1Ym1pdE5ld1RvcGljKCkgewogICAgICBpZiAodGhpcy5pbWFnZURhdGEpIHsKICAgICAgICBsZXQgaW1nUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh0aGlzLm9uVXBsb2FkKCkpOwogICAgICAgIGF3YWl0IGltZ1Byb21pc2UudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICAgICAgYXdhaXQgdGhpcy5zdWJtaXROZXdUb3BpYygpOwogICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50b3BpY190aHVtYkZpbGUgPSAicGxhY2VIb2xkZXJJbWcucG5nIjsKICAgICAgICB0aGlzLnRvcGljX3RodW1iVVJMID0KICAgICAgICAgICJodHRwczovL2ZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbS92MC9iL3N0dWR5LWJpdGVzLTEuYXBwc3BvdC5jb20vby9wbGFjZUhvbGRlckltZy5wbmc/YWx0PW1lZGlhJnRva2VuPTM4ZWNlZDA3LTU0YTQtNGIzYS1iMmY5LTQ5ZmE4ZTAxZGE2MyI7CgogICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgYXdhaXQgdGhpcy5zdWJtaXROZXdUb3BpYygpOwogICAgICAgIH0sIDIwMDApOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["AddTopicForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddTopicForm.vue","sourceRoot":"src/components/AddTopic","sourcesContent":["<template>\n  <div id=\"addTopic\">\n    <v-contianer fluid>\n      <v-row>\n        <v-col>\n          <div class=\"d-flex flex-start\">\n            <v-btn fab text @click=\"$router.push({ path: '/addcontent' })\">\n              <v-icon size=\"42\" color=\"#3891A6\">\n                mdi-arrow-left-drop-circle\n              </v-icon>\n            </v-btn>\n            <div style=\"font-size: 36px\">Adding a Topic</div>\n          </div>\n\n          <div\n            class=\"d-flex justify-center align-center pa-2 white--text font-italic\"\n            width=\"100%\"\n            style=\"\n              background-color: #273238;\n              font-size: 18px;\n              border-radius: 4px;\n            \"\n          >\n            Add a new topic to the Study Bites home page by filling in basic\n            information.\n          </div>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col>\n          <v-col class=\"mx-auto pt-10\" cols=\"10\" sm=\"9\" md=\"11\">\n            <v-text-field\n              label=\"Topic title:\"\n              background-color=\"grey lighten-2\"\n              v-model=\"title\"\n              outlined\n              dense\n            ></v-text-field>\n          </v-col>\n          <v-col class=\"mx-auto mt-n3\" cols=\"10\" sm=\"9\" md=\"11\">\n            <div class=\"d-flex flex-start mt-n4\">\n              <v-card\n                class=\"d-block\"\n                width=\"10vw\"\n                height=\"5vw\"\n                color=\"grey lighten-2\"\n                outlined\n              >\n                <v-img v-if=\"url\" :src=\"url\" height=\"80px\" width=\"10vw\"></v-img>\n              </v-card>\n\n              <div style=\"width: 15vw; height: 5vw\">\n                <input\n                  class=\"pl-4\"\n                  ref=\"input1\"\n                  type=\"file\"\n                  @change=\"previewImage\"\n                />\n              </div>\n            </div>\n          </v-col>\n          <v-col class=\"mx-auto pt-10\" cols=\"10\" sm=\"9\" md=\"11\">\n            <div class=\"d-flex flex-start mt-n4\" style=\"width: 22vw\">\n              <v-select\n                v-model=\"timePeriod\"\n                :items=\"timePeriodChoices\"\n                label=\"Time Period\"\n                background-color=\"grey lighten-2\"\n                outlined\n                dense\n              >\n              </v-select>\n            </div>\n          </v-col>\n          <div class=\"d-flex justify-end pr-12\">\n            <v-btn\n              class=\"white--text\"\n              width=\"140\"\n              color=\"#3891A6\"\n              :disabled=\"!checkfield\"\n              elevation=\"2\"\n              >Reset</v-btn\n            >\n          </div>\n          <div class=\"d-flex justify-end pr-12 pt-4\">\n            <v-btn\n              class=\"white--text\"\n              width=\"140\"\n              color=\"#3891A6\"\n              elevation=\"2\"\n              @click=\"handleSubmitNewTopic\"\n              >Save</v-btn\n            >\n          </div>\n        </v-col>\n      </v-row>\n    </v-contianer>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport { mapFields } from \"vuex-map-fields\";\nimport firebase from \"firebase\";\n\nexport default {\n  data: () => ({\n    image: null,\n    timePeriodChoices: [1, 2, 3, 4],\n    disabled: 1,\n    url: null,\n    caption: \"\",\n    img1: \"\",\n    imageData: null,\n  }),\n  computed: {\n    selectsPeriod() {\n      return this.selectedPeriod.length > 0;\n    },\n    icon() {\n      if (this.selectsPeriod) return \"mdi-minus-box\";\n      return \"mdi-checkbox-blank-outline\";\n    },\n    checkfield() {\n      return this.title || this.image || this.selectedPeriod;\n    },\n    ...mapFields(\"topics\", [\n      \"currentTopic.title\",\n      \"currentTopic.introMD\",\n      \"currentTopic.intro_thumbFile\",\n      \"currentTopic.intro_thumbURL\",\n      \"currentTopic.topic_thumbFile\",\n      \"currentTopic.topic_thumbURL\",\n      // 'currentTopic.disabled',\n      \"currentTopic.timePeriod\",\n      \"currentTopic.searchArray\",\n    ]),\n  },\n\n  methods: {\n    toggle() {\n      this.$nextTick(() => {\n        this.selectedPeriod = [this.timePeriod.slice()];\n      });\n    },\n    resetbtn(e) {\n      if (this.checkfield) {\n        this.disabled = 0;\n      }\n      e.preventDefault();\n    },\n    //      create () {\n\n    // const post = {\n    //   photo: this.img1,\n    //   caption: this.caption\n    // }\n    // firebase.database().ref('PhotoGallery').push(post)\n    // .then((response) => {\n    //   console.log(response)\n    // })\n    // .catch(err => {\n    //   console.log(err)\n    // })\n    //     },\n    //   click1() {\n    //   this.$refs.input1.click()\n    // },\n    previewImage(e) {\n      this.uploadValue = 0;\n      console.log(e.target.files[0]);\n      let file = e.target.files[0];\n      let fileSize = file.size / 1024 / 1024;\n      if (fileSize > 2) {\n        e.preventDefault();\n        alert(\"File is over 2mb\");\n      } else {\n        this.url = URL.createObjectURL(file);\n        this.imageData = e.target.files[0];\n        this.topic_thumbFile = file.name;\n      }\n    },\n    onUpload() {\n      const storageRef = firebase\n        .storage()\n        .ref(`${this.imageData.name}`)\n        .put(this.imageData);\n      storageRef.on(\n        `state_changed`,\n        (snapshot) => {\n          this.uploadValue =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        },\n        (error) => {\n          console.log(error.message);\n        },\n        async () => {\n          this.uploadValue = 100;\n          await storageRef.snapshot.ref.getDownloadURL().then((url) => {\n            // this.img1 = url;\n            // console.log(this.img1);\n            this.topic_thumbURL = url;\n            console.log(this.topic_thumbURL);\n            return true;\n          });\n        }\n      );\n    },\n    ...mapActions(\"topics\", [\"submitNewTopic\"]),\n    async handleSubmitNewTopic() {\n      if (this.imageData) {\n        let imgPromise = Promise.resolve(this.onUpload());\n        await imgPromise.then(async () => {\n          setTimeout(async () => {\n            await this.submitNewTopic();\n          }, 2000);\n        });\n      } else {\n        this.topic_thumbFile = \"placeHolderImg.png\";\n        this.topic_thumbURL =\n          \"https://firebasestorage.googleapis.com/v0/b/study-bites-1.appspot.com/o/placeHolderImg.png?alt=media&token=38eced07-54a4-4b3a-b2f9-49fa8e01da63\";\n\n        setTimeout(async () => {\n          await this.submitNewTopic();\n        }, 2000);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}