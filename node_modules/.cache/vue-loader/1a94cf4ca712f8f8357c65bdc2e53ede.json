{"remainingRequest":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/engram/Documents/Web_apps/ap-study-bites-admin/src/components/ModifyContent/ContentDetails/PrimarySources/PrimarySources.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/src/components/ModifyContent/ContentDetails/PrimarySources/PrimarySources.vue","mtime":1642818799866},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/cache-loader/dist/cjs.js","mtime":1640582283784},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/babel-loader/lib/index.js","mtime":1640582283745},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/cache-loader/dist/cjs.js","mtime":1640582283784},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/index.js","mtime":1640582283219}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgbWFwRmllbGRzIH0gZnJvbSAidnVleC1tYXAtZmllbGRzIjsKaW1wb3J0IEFydGlmYWN0IGZyb20gIi4vQXJ0aWZhY3QvQXJ0aWZhY3QudnVlIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKaW1wb3J0IG5hdmJhciBmcm9tICIuLi9Nb2RpZnlDb250ZW50SGVhZGVyLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRlcm06IG51bGwsCiAgICAgIGRlZjogbnVsbCwKICAgICAgc29ydEJ5OiBbIlRlcm06IEFzY2VuZGluZyIsICJUZXJtOiBEZXNjZW5kaW5nIl0sCiAgICAgIHNlbGVjdGVkU29ydDogIlRlcm06IEFzY2VuZGluZyIsCiAgICAgIGltYWdlOiBudWxsLAogICAgICB1cmw6IG51bGwsCiAgICAgIGltYWdlRGF0YTogbnVsbCwKICAgICAgdGFiOiAzLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsgQXJ0aWZhY3QsIG5hdmJhciB9LAogIGNvbXB1dGVkOiB7CiAgICBjaGVja2ZpZWxkKCkgewogICAgICByZXR1cm4gdGhpcy50aXRsZSB8fCB0aGlzLmNhcHRpb247CiAgICB9LAogICAgLi4ubWFwR2V0dGVycygid29ya3MiLCBbImN1cnJlbnRUb3BpY1dvcmtzIl0pLAogICAgLi4ubWFwRmllbGRzKCJ3b3JrcyIsIFsKICAgICAgImN1cnJlbnRXb3JrLnRpdGxlIiwKICAgICAgImN1cnJlbnRXb3JrLmNhcHRpb24iLAogICAgICAiY3VycmVudFdvcmsudGh1bWJVUkwiLAogICAgICAiY3VycmVudFdvcmsudGh1bWJGaWxlIiwKICAgIF0pLAogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucygid29ya3MiLCBbCiAgICAgICJmZXRjaFdvcmtzIiwKICAgICAgInN1Ym1pdE5ld1dvcmsiLAogICAgICAiY2xlYXJXb3JrSWQiLAogICAgICAiY2xlYXJXb3JrRmllbGRzIiwKICAgIF0pLAogICAgbW91bnRQcmV2aWV3KCkgewogICAgICB0aGlzLnVybCA9IHRoaXMudGh1bWJVUkw7CiAgICB9LAogICAgcHJldmlld0ltYWdlKGUpIHsKICAgICAgdGhpcy51cGxvYWRWYWx1ZSA9IDA7CiAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LmZpbGVzWzBdKTsKICAgICAgbGV0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgbGV0IGZpbGVTaXplID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQ7CiAgICAgIGlmIChmaWxlU2l6ZSA+IDIpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgYWxlcnQoIkZpbGUgaXMgb3ZlciAybWIiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7CiAgICAgICAgdGhpcy5pbWFnZURhdGEgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICB0aGlzLnRodW1iRmlsZSA9IGZpbGUubmFtZTsKICAgICAgfQogICAgfSwKICAgIG9uVXBsb2FkKCkgewogICAgICBjb25zdCBzdG9yYWdlUmVmID0gZmlyZWJhc2UKICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgLnJlZihgJHt0aGlzLmltYWdlRGF0YS5uYW1lfWApCiAgICAgICAgLnB1dCh0aGlzLmltYWdlRGF0YSk7CiAgICAgIHN0b3JhZ2VSZWYub24oCiAgICAgICAgYHN0YXRlX2NoYW5nZWRgLAogICAgICAgIChzbmFwc2hvdCkgPT4gewogICAgICAgICAgdGhpcy51cGxvYWRWYWx1ZSA9CiAgICAgICAgICAgIChzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkIC8gc25hcHNob3QudG90YWxCeXRlcykgKiAxMDA7CiAgICAgICAgfSwKICAgICAgICAoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpOwogICAgICAgIH0sCiAgICAgICAgKCkgPT4gewogICAgICAgICAgdGhpcy51cGxvYWRWYWx1ZSA9IDEwMDsKICAgICAgICAgIHN0b3JhZ2VSZWYuc25hcHNob3QucmVmLmdldERvd25sb2FkVVJMKCkudGhlbigodXJsKSA9PiB7CiAgICAgICAgICAgIC8vIHRoaXMuaW1nMSA9IHVybDsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pbWcxKTsKICAgICAgICAgICAgdGhpcy50aHVtYlVSTCA9IHVybDsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy50aHVtYlVSTCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgYXN5bmMgaGFuZGxlU2F2ZVdvcmsoKSB7CiAgICAgIGlmICh0aGlzLmltYWdlRGF0YSkgewogICAgICAgIGxldCBpbWdQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHRoaXMub25VcGxvYWQoKSk7CiAgICAgICAgYXdhaXQgaW1nUHJvbWlzZS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBhd2FpdCB0aGlzLnN1Ym1pdE5ld1dvcmsoKTsKICAgICAgICAgIH0sIDIwMDApOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGh1bWJGaWxlID0gInBsYWNlSG9sZGVySW1nLnBuZyI7CiAgICAgICAgdGhpcy50aHVtYlVSTCA9CiAgICAgICAgICAiaHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9zdHVkeS1iaXRlcy0xLmFwcHNwb3QuY29tL28vcGxhY2VIb2xkZXJJbWcucG5nP2FsdD1tZWRpYSZ0b2tlbj0zOGVjZWQwNy01NGE0LTRiM2EtYjJmOS00OWZhOGUwMWRhNjMiOwogICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgYXdhaXQgdGhpcy5zdWJtaXROZXdXb3JrKCk7CiAgICAgICAgfSwgMjAwMCk7CiAgICAgIH0KICAgICAgdGhpcy51cmwgPSBudWxsOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybSIpLnJlc2V0KCk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubW91bnRQcmV2aWV3KCk7CiAgICB0aGlzLmZldGNoV29ya3MoKTsKICAgIHRoaXMuY2xlYXJXb3JrSWQoKTsKICAgIHRoaXMuY2xlYXJXb3JrRmllbGRzKCk7CiAgfSwKfTsK"},{"version":3,"sources":["PrimarySources.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PrimarySources.vue","sourceRoot":"src/components/ModifyContent/ContentDetails/PrimarySources","sourcesContent":["<template>\n  <div id=\"modifyContent\">\n    <v-container fluid>\n      <navbar />\n      <!-- ADDING CONTENT -->\n      <v-row class=\"mx-4\">\n        <!-- SOURCE CONTENT -->\n        <v-col lg=\"6\" md=\"6\" sm=\"12\" xs=\"12\">\n          <v-text-field\n            label=\"Artifact:\"\n            v-model=\"title\"\n            outlined\n            dense\n          ></v-text-field>\n          <v-textarea\n            v-model=\"caption\"\n            outlined\n            name=\"input-7-4\"\n            label=\"Caption:\"\n          ></v-textarea>\n        </v-col>\n\n        <v-col lg=\"6\" md=\"6\" sm=\"12\" xs=\"12\">\n          <v-row>\n            <v-col>\n              <!-- IMG PREVIEW -->\n              <div class=\"d-flex\">\n                <v-card\n                  class=\"d-block\"\n                  height=\"80px\"\n                  width=\"10vw\"\n                  color=\"grey lighten-2\"\n                >\n                  <v-img\n                    v-if=\"url\"\n                    :src=\"url\"\n                    height=\"80px\"\n                    width=\"10vw\"\n                  ></v-img>\n                </v-card>\n                <div style=\"width: 17vw\">\n                  <form id=\"form\">\n                    <input\n                      class=\"pl-4\"\n                      ref=\"input1\"\n                      type=\"file\"\n                      @change=\"previewImage\"\n                    />\n                  </form>\n                </div>\n              </div>\n            </v-col>\n          </v-row>\n          <v-row class=\"pt-14\">\n            <v-col class=\"d-flex justify-end pr-0\">\n              <v-btn\n                class=\"white--text\"\n                width=\"180\"\n                color=\"#3891A6\"\n                :disabled=\"!checkfield\"\n                elevation=\"2\"\n                @click=\"clearWorkFields\"\n              >\n                Reset\n              </v-btn>\n            </v-col>\n            <v-col lg=\"5\" md=\"5\" sm=\"5\" xs=\"12\" class=\"d-flex justify-end\">\n              <v-btn\n                class=\"white--text \"\n                width=\"180\"\n                color=\"#3891A6\"\n                elevation=\"2\"\n                @click=\"handleSaveWork\"\n              >\n                + Add Primary Source\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-col>\n      </v-row>\n      <!-- DROP DOWN -->\n      <v-row class=\"d-flex justify-end pt-4\">\n        <div class=\"pt-1 pr-2\" style=\"font-size: 18px\">Sort by:</div>\n        <div style=\"width: 15vw\">\n          <v-select\n            v-model=\"selectedSort\"\n            :items=\"sortBy\"\n            :menu-props=\"{ top: false, offsetY: false }\"\n            background-color=\"grey lighten-2\"\n            outlined\n            dense\n            disabled\n          >\n          </v-select>\n        </div>\n      </v-row>\n      <!-- DISPLAY SOURCES -->\n      <v-row class=\"d-flex justify-center\">\n        <div v-for=\"work in currentTopicWorks\" :key=\"work.id\">\n          <Artifact class=\"mx-2 my-2\" v-bind:work=\"work\" />\n        </div>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\nimport { mapFields } from \"vuex-map-fields\";\nimport Artifact from \"./Artifact/Artifact.vue\";\nimport firebase from \"firebase\";\nimport navbar from \"../ModifyContentHeader.vue\";\n\nexport default {\n  data() {\n    return {\n      term: null,\n      def: null,\n      sortBy: [\"Term: Ascending\", \"Term: Descending\"],\n      selectedSort: \"Term: Ascending\",\n      image: null,\n      url: null,\n      imageData: null,\n      tab: 3,\n    };\n  },\n  components: { Artifact, navbar },\n  computed: {\n    checkfield() {\n      return this.title || this.caption;\n    },\n    ...mapGetters(\"works\", [\"currentTopicWorks\"]),\n    ...mapFields(\"works\", [\n      \"currentWork.title\",\n      \"currentWork.caption\",\n      \"currentWork.thumbURL\",\n      \"currentWork.thumbFile\",\n    ]),\n  },\n  methods: {\n    ...mapActions(\"works\", [\n      \"fetchWorks\",\n      \"submitNewWork\",\n      \"clearWorkId\",\n      \"clearWorkFields\",\n    ]),\n    mountPreview() {\n      this.url = this.thumbURL;\n    },\n    previewImage(e) {\n      this.uploadValue = 0;\n      console.log(e.target.files[0]);\n      let file = e.target.files[0];\n      let fileSize = file.size / 1024 / 1024;\n      if (fileSize > 2) {\n        e.preventDefault();\n        alert(\"File is over 2mb\");\n      } else {\n        this.url = URL.createObjectURL(file);\n        this.imageData = e.target.files[0];\n        this.thumbFile = file.name;\n      }\n    },\n    onUpload() {\n      const storageRef = firebase\n        .storage()\n        .ref(`${this.imageData.name}`)\n        .put(this.imageData);\n      storageRef.on(\n        `state_changed`,\n        (snapshot) => {\n          this.uploadValue =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        },\n        (error) => {\n          console.log(error.message);\n        },\n        () => {\n          this.uploadValue = 100;\n          storageRef.snapshot.ref.getDownloadURL().then((url) => {\n            // this.img1 = url;\n            // console.log(this.img1);\n            this.thumbURL = url;\n            console.log(this.thumbURL);\n          });\n        }\n      );\n    },\n    async handleSaveWork() {\n      if (this.imageData) {\n        let imgPromise = Promise.resolve(this.onUpload());\n        await imgPromise.then(async () => {\n          setTimeout(async () => {\n            await this.submitNewWork();\n          }, 2000);\n        });\n      } else {\n        this.thumbFile = \"placeHolderImg.png\";\n        this.thumbURL =\n          \"https://firebasestorage.googleapis.com/v0/b/study-bites-1.appspot.com/o/placeHolderImg.png?alt=media&token=38eced07-54a4-4b3a-b2f9-49fa8e01da63\";\n        setTimeout(async () => {\n          await this.submitNewWork();\n        }, 2000);\n      }\n      this.url = null;\n      document.getElementById(\"form\").reset();\n    },\n  },\n  created() {\n    this.mountPreview();\n    this.fetchWorks();\n    this.clearWorkId();\n    this.clearWorkFields();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#imageThumbnail {\n  width: 15vw;\n  height: 10vw;\n  background-color: #5b6368;\n}\n#nav {\n  a {\n    padding: 4px 24px;\n    text-decoration: none;\n    color: #ffffff;\n    font-weight: lighter;\n    background-color: #5b6368;\n\n    &.router-link-exact-active {\n      background-color: #3891a6;\n    }\n  }\n}\n</style>\n"]}]}