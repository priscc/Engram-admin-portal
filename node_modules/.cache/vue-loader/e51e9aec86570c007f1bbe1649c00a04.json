{"remainingRequest":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/engram/Documents/Web_apps/ap-study-bites-admin/src/components/ModifyContent/ContentDetails/Events/Forms/EventGeneral.vue?vue&type=style&index=0&id=c71824c4&lang=scss&scoped=true&","dependencies":[{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/src/components/ModifyContent/ContentDetails/Events/Forms/EventGeneral.vue","mtime":1639249288657},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/css-loader/dist/cjs.js","mtime":1639206904515},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1639538246693},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/postcss-loader/src/index.js","mtime":1639206904726},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/sass-loader/dist/cjs.js","mtime":1639206907812},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/cache-loader/dist/cjs.js","mtime":1639206897149},{"path":"/Users/engram/Documents/Web_apps/ap-study-bites-admin/node_modules/vue-loader/lib/index.js","mtime":1639538246688}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojaW1hZ2VUaHVtYm5haWwgewogIHdpZHRoOiAxNXZ3OwogIGhlaWdodDogMTB2dzsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWI2MzY4Owp9CiNuYXYgewogIGEgewogICAgcGFkZGluZzogNHB4IDI0cHg7CiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICBjb2xvcjogI2ZmZmZmZjsKICAgIGZvbnQtd2VpZ2h0OiBsaWdodGVyOwogICAgYmFja2dyb3VuZC1jb2xvcjogIzViNjM2ODsKCiAgICAmLnJvdXRlci1saW5rLWV4YWN0LWFjdGl2ZSB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzODkxYTY7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["EventGeneral.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"EventGeneral.vue","sourceRoot":"src/components/ModifyContent/ContentDetails/Events/Forms","sourcesContent":["<template>\n  <v-form>\n    <v-card class=\"mx-auto mt-4\" width=\"62vw\" height=\"35vw\">\n      <v-card class=\"mx-auto\" width=\"62vw\" height=\"5vw\" color=\"#273238\">\n        <div class=\"d-flex\">\n          <v-container class=\"pt-8 pl-12 d-flex\">\n            <div id=\"nav\">\n              <router-link\n                class=\"col\"\n                to=\"/addcontent/modifycontent/events/general\"\n                exact\n                >General</router-link\n              >\n              <router-link\n                class=\"col\"\n                to=\"/addcontent/modifycontent/events/map\"\n                exact\n                >Map</router-link\n              >\n              <router-link\n                class=\"col\"\n                :event=\"routeValidation ? 'click' : ''\"\n                to=\"/addcontent/modifycontent/events/text\"\n                exact\n                >Text</router-link\n              >\n              <router-link\n                class=\"col\"\n                :event=\"routeValidation ? 'click' : ''\"\n                to=\"/addcontent/modifycontent/events/resources\"\n                exact\n                >Resources</router-link\n              >\n            </div>\n          </v-container>\n          <div class=\"d-flex justify-end\">\n            <span class=\"material-icons\">\n              <v-icon\n                size=\"40\"\n                color=\"#3891A6\"\n                @click=\"closeForm('Events', '/events')\"\n              >\n                disabled_by_default\n              </v-icon>\n            </span>\n          </div>\n        </div>\n      </v-card>\n      <v-col class=\"pl-12 pt-9\" cols=\"10\" sm=\"9\" md=\"11\">\n        <v-text-field\n          v-model=\"title\"\n          label=\"Title\"\n          background-color=\"grey lighten-2\"\n          outlined\n          dense\n          required\n        ></v-text-field>\n      </v-col>\n      <div class=\"d-flex\">\n        <v-col class=\"pl-12 mt-n4\" cols=\"4\">\n          <v-text-field\n            v-model=\"startDate\"\n            label=\"Start Date\"\n            background-color=\"grey lighten-2\"\n            outlined\n            dense\n          ></v-text-field>\n        </v-col>\n        <div class=\"d-flex align-center mt-n10 pr-12\">\n          <div class=\"d-flex\" style=\"width: 30px\">{{ eraStart }}</div>\n          <v-switch\n            v-model=\"startEra\"\n            inset\n            @click=\"switchToggle($event, 'start')\"\n            color=\"#3891A6\"\n          ></v-switch>\n        </div>\n        <v-col class=\"ml-n4 mt-n4\" cols=\"4\">\n          <v-text-field\n            v-model=\"endDate\"\n            label=\"End Date\"\n            background-color=\"grey lighten-2\"\n            outlined\n            dense\n          ></v-text-field>\n        </v-col>\n        <div class=\"d-flex align-center mt-n10 pr-12\">\n          <div class=\"d-flex\" style=\"width: 30px\">{{ eraEnd }}</div>\n          <v-switch\n            v-model=\"endEra\"\n            inset\n            @click=\"switchToggle($event, 'end')\"\n            color=\"#3891A6\"\n          ></v-switch>\n        </div>\n      </div>\n      <div class=\"d-flex pl-12 mt-n4\">\n        <v-card\n          class=\"d-block\"\n          height=\"80px\"\n          width=\"10vw\"\n          color=\"grey lighten-2\"\n        >\n          <v-img v-if=\"url\" :src=\"url\" height=\"80px\" width=\"10vw\"></v-img>\n        </v-card>\n\n        <div style=\"width: 17vw\">\n          <!-- <v-file-input\n            class=\"pt-10\"\n            @change=\"Preview_image\"\n            v-model=\"image\"\n            accept=\"image/*\"\n            prepend-icon=\"none\"\n            append-icon=\"attach_file\"\n            placeholder=\"Upload TOPIC thumbnail\"\n          >\n          </v-file-input> -->\n          <input class=\"pl-4\" ref=\"input1\" type=\"file\" @change=\"previewImage\" />\n        </div>\n      </div>\n      <v-col class=\"pl-12\" cols=\"10\">\n        <div class=\"d-flex flex-start\" style=\"width: 24vw\">\n          <v-select\n            v-model=\"selectedPeriod\"\n            :items=\"eventTheme\"\n            :menu-props=\"{ top: false, offsetY: true }\"\n            label=\"Choose Event Theme:\"\n            background-color=\"grey lighten-2\"\n            outlined\n            dense\n          >\n          </v-select>\n        </div>\n      </v-col>\n      <div class=\"d-flex justify-end pr-12\">\n        <v-btn\n          class=\"white--text\"\n          width=\"140\"\n          color=\"#3891A6\"\n          elevation=\"2\"\n          :disabled=\"!checkfield\"\n          @click=\"handleSaveEvent\"\n          >Save</v-btn\n        >\n      </div>\n    </v-card>\n  </v-form>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\nimport { mapFields } from \"vuex-map-fields\";\nimport firebase from \"firebase\";\n\nexport default {\n  data: () => ({\n    // title: null,\n    image: null,\n    eventTheme: [\n      \"Society\",\n      \"Politics\",\n      \"Environment\",\n      \"Culture\",\n      \"Economics\",\n      \"Technology\",\n      \"Independent\",\n    ],\n    selectedPeriod: null,\n    disabled: 1,\n    url: null,\n    imageData: null,\n    eraStart: \"AD\",\n    eraEnd: \"AD\",\n  }),\n  computed: {\n    selectsPeriod() {\n      return this.selectedPeriod.length > 0;\n    },\n    icon() {\n      if (this.selectsPeriod) return \"mdi-minus-box\";\n      return \"mdi-checkbox-blank-outline\";\n    },\n    checkfield() {\n      return this.currentEvent.title;\n    },\n    ...mapFields(\"events\", [\n      \"currentEvent.title\",\n      \"currentEvent.thumbURL\",\n      \"currentEvent.thumbFile\",\n    ]),\n    ...mapFields(\"events\", {\n      startDate: \"currentEvent.startDate.date\",\n      startEra: \"currentEvent.startDate.era\",\n      endDate: \"currentEvent.endDate.date\",\n      endEra: \"currentEvent.endDate.era\",\n    }),\n    ...mapGetters(\"events\", [\"currentEvent\", \"currentEventId\"]),\n    //* checks if the person name field is empty\n    routeValidation() {\n      if (this.currentEvent.title == \"\") {\n        //* if name field is empty, route is not allowed\n        return false;\n      } else {\n        //* if not empty, route is allowed\n        return true;\n      }\n    },\n  },\n  methods: {\n    ...mapActions(\"events\", [\"closeForm\", \"handleSave\"]),\n    mountPreview() {\n      this.url = this.thumbURL;\n    },\n    toggle() {\n      this.$nextTick(() => {\n        this.selectedPeriod = this.timePeriod.slice();\n      });\n    },\n    resetbtn(e) {\n      if (this.checkfield) {\n        this.disabled = 0;\n      }\n      e.preventDefault();\n    },\n    switchToggle(e, date) {\n      console.log(this.endEra);\n      if (date === \"start\") {\n        if (this.startEra) {\n          this.eraStart = \"AD\";\n        } else {\n          this.eraStart = \"BC\";\n        }\n      } else {\n        if (this.endEra) {\n          this.eraEnd = \"AD\";\n        } else {\n          this.eraEnd = \"BC\";\n        }\n      }\n      e.preventDefault();\n    },\n    previewImage(e) {\n      this.uploadValue = 0;\n      console.log(e.target.files[0]);\n      let file = e.target.files[0];\n      let fileSize = file.size / 1024 / 1024;\n      if (fileSize > 2) {\n        e.preventDefault();\n        alert(\"File is over 2mb\");\n      } else {\n        this.url = URL.createObjectURL(file);\n        this.imageData = e.target.files[0];\n        this.thumbFile = file.name;\n      }\n    },\n    onUpload() {\n      const storageRef = firebase\n        .storage()\n        .ref(`${this.imageData.name}`)\n        .put(this.imageData);\n      storageRef.on(\n        `state_changed`,\n        (snapshot) => {\n          this.uploadValue =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        },\n        (error) => {\n          console.log(error.message);\n        },\n        () => {\n          this.uploadValue = 100;\n          storageRef.snapshot.ref.getDownloadURL().then((url) => {\n            // this.img1 = url;\n            // console.log(this.img1);\n            this.thumbURL = url;\n            console.log(this.thumbURL);\n          });\n        }\n      );\n    },\n    async handleSaveEvent() {\n      if (this.imageData) {\n        let imgPromise = Promise.resolve(this.onUpload());\n        await imgPromise.then(async () => {\n          setTimeout(async () => {\n            await this.handleSave();\n          }, 2000);\n        });\n      } else {\n        this.thumbFile = \"placeHolderImg.png\";\n        this.thumbURL =\n          \"https://firebasestorage.googleapis.com/v0/b/study-bites-1.appspot.com/o/placeHolderImg.png?alt=media&token=38eced07-54a4-4b3a-b2f9-49fa8e01da63\";\n        setTimeout(async () => {\n          await this.handleSave();\n        }, 2000);\n      }\n    },\n  },\n  created() {\n    this.mountPreview();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#imageThumbnail {\n  width: 15vw;\n  height: 10vw;\n  background-color: #5b6368;\n}\n#nav {\n  a {\n    padding: 4px 24px;\n    text-decoration: none;\n    color: #ffffff;\n    font-weight: lighter;\n    background-color: #5b6368;\n\n    &.router-link-exact-active {\n      background-color: #3891a6;\n    }\n  }\n}\n</style>\n"]}]}